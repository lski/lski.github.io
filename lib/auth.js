"use strict";define(["vendor/lski-storage","lib/url","lib/analytics","app/config"],function(e,r,n,o){function t(){return!!u()}function u(){return e.store(g.token)}function l(){return f(e.store(g.user))}function s(r,o,t){n.loggedIn(o.Id),e.store(g.user,o,{expires:t}),e.store(g.token,r,{expires:t})}function i(){e.store(g.user,null),e.store(g.token,null)}function a(){r.load(r.resolve(g.urls.logout))}function c(){t()?r.load(r.resolve(g.urls.login)):r.load(r.resolve(r.addParam(g.urls.login,"returnUrl",r.current())))}function d(){r.load(decodeURIComponent(r.params().returnUrl||"#"))}function f(e){var r=e||{};return r.isInRole=function(e){for(var n=r.roles=r.roles||[],o=0,t=n.length;o<t;o++)if(n[o]===e)return!0;return!1},r}var g={token:"token",user:"user",urls:o&&o.auth&&o.auth.urls||{logout:"#logout",login:"#login"}};o&&o.auth&&o.auth.access_token&&u(o.auth.access_token,o.auth.expires_in);var k={authenticated:t,login:s,logout:i,token:u,user:l,loginRedirect:c,logoutRedirect:a,transferRedirect:d};return k});
//# sourceMappingURL=../maps/lib/auth.js.map
