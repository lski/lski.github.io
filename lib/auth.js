"use strict";!function(e){"function"==typeof define&&define.amd&&define(["vendor/lski-storage","lib/url","lib/analytics","module"],function(n,r,o,t){return e(n,r,o,t.config())})}(function(e,n,r,o){function t(){return!!u()}function u(){return e.store(g.token)}function l(){return d(e.store(g.user))}function i(n,o,t){r.loggedIn(o.Id),e.store(g.user,o,{expires:t}),e.store(g.token,n,{expires:t})}function s(){e.store(g.user,null),e.store(g.token,null)}function c(){n.load(n.resolve(g.urls.logout))}function a(){t()?n.load(n.resolve(g.urls.login)):n.load(n.resolve(n.addParam(g.urls.login,"returnUrl",n.current())))}function f(){n.load(decodeURIComponent(n.params().returnUrl||"#"))}function d(e){var n=e||{};return n.isInRole=function(e){for(var r=n.roles=n.roles||[],o=0,t=r.length;t>o;o++)if(r[o]===e)return!0;return!1},n}var g={token:"token",user:"user",urls:o&&o.urls||{logout:"#logout",login:"#login"}};o&&o.auth&&o.auth.access_token&&u(o.auth.access_token,o.auth.expires_in);var k={authenticated:t,login:i,logout:s,token:u,user:l,loginRedirect:a,logoutRedirect:c,transferRedirect:f};return k});
//# sourceMappingURL=../maps/lib/auth.js.map
