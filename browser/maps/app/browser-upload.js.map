{"version":3,"sources":["app/browser-upload.js"],"names":["React","ReactDOM","$","jQuery","ctx","messages","lski","folderStore","contentsActions","BrowserUpload","createClass","displayName","componentDidMount","this","refs","input","fileupload","url","resolveApi","on","e","data","path","getSelectedPath","formData","submit","newItem","evt","err","alert","JSON","parse","xhr","responseText","message","render","createElement","ref","type","name","style","display"],"mappings":"AAAA,YAEA,IAAIA,OAAQA,MACRC,SAAWA,SACXC,EAAIC,OACJC,IAAMA,IACNC,SAAWC,KAAKD,SAChBE,YAAcA,YACdC,gBAAkBA,gBAElBC,cAAgBT,MAAMU,aACzBC,YAAa,gBACbC,kBAAmB,WAGlBV,EAAEW,KAAKC,KAAKC,OAAOC,YAAaC,IAAKb,IAAIc,WAAW,yBAA0BC,GAAG,gBAAiB,SAAyBC,EAAGC,GAE7H,GAAIC,GAAOf,YAAYgB,iBAGlBD,KAKLD,EAAKG,UAAaF,KAAMA,GACxBD,EAAKI,YACHN,GAAG,iBAAkB,WAEvBX,gBAAgBkB,YACdP,GAAG,iBAAkB,SAA4BQ,EAAKC,GAExD,IACCvB,SAASwB,MAAMC,KAAKC,MAAMH,EAAII,MAAMC,cAAcC,SACjD,MAAOd,GACRf,SAASwB,MAAM,6CAIlBM,OAAQ,WACP,MAAOnC,OAAMoC,cAAc,SAAWC,IAAK,QAASC,KAAM,OAAQC,KAAM,SAAUC,OAASC,QAAW","file":"app/browser-upload.js","sourcesContent":["'use strict';\n\nvar React = React;\nvar ReactDOM = ReactDOM;\nvar $ = jQuery;\nvar ctx = ctx;\nvar messages = lski.messages;\nvar folderStore = folderStore;\nvar contentsActions = contentsActions;\n\nvar BrowserUpload = React.createClass({\n\tdisplayName: 'BrowserUpload',\n\tcomponentDidMount: function componentDidMount() {\n\n\t\t// Use jquery on as internally it uses triggerHandler rather than trigger\n\t\t$(this.refs.input).fileupload({ url: ctx.resolveApi('/api/browser/upload') }).on('fileuploadadd', function onFileUploadAdd(e, data) {\n\n\t\t\tvar path = folderStore.getSelectedPath();\n\n\t\t\t// If there is not currently a selected folder then stop\n\t\t\tif (!path) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prior to sending the file, we need to add the folder path so it knows where to store it\n\t\t\tdata.formData = { path: path };\n\t\t\tdata.submit();\n\t\t}).on('fileuploaddone', function onFileUploadDone() {\n\n\t\t\tcontentsActions.newItem();\n\t\t}).on('fileuploadfail', function onFileUploadFailed(evt, err) {\n\n\t\t\ttry {\n\t\t\t\tmessages.alert(JSON.parse(err.xhr().responseText).message);\n\t\t\t} catch (e) {\n\t\t\t\tmessages.alert('There was an error uploading the file');\n\t\t\t}\n\t\t});\n\t},\n\trender: function render() {\n\t\treturn React.createElement('input', { ref: 'input', type: 'file', name: 'posted', style: { \"display\": 'none' } });\n\t}\n});"],"sourceRoot":"/source/"}