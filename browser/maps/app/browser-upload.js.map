{"version":3,"sources":["app/browser-upload.js"],"names":["React","ReactDOM","$","jQuery","ctx","messages","lski","BrowserUpload","createClass","displayName","propTypes","uploadFolder","PropTypes","string","isRequired","onFileAdded","func","componentDidMount","_this","this","refs","input","fileupload","url","resolveApi","on","e","data","path","props","formData","submit","evt","err","alert","JSON","parse","xhr","responseText","message","render","createElement","ref","type","name","style","display"],"mappings":"AAAA,YAEA,IAAIA,OAAQA,MACRC,SAAWA,SACXC,EAAIC,OACJC,IAAMA,IACNC,SAAWC,KAAKD,SAEhBE,cAAgBP,MAAMQ,aACzBC,YAAa,gBAEbC,WACCC,aAAcX,MAAMY,UAAUC,OAAOC,WACrCC,YAAaf,MAAMY,UAAUI,KAAKF,YAEnCG,kBAAmB,WAElB,GAAIC,GAAQC,IAGZjB,GAAEiB,KAAKC,KAAKC,OAAOC,YAAaC,IAAKnB,IAAIoB,WAAW,yBAA0BC,GAAG,gBAAiB,SAAyBC,EAAGC,GAE7H,GAAIC,GAAOV,EAAMW,MAAMlB,YAGlBiB,KAKLD,EAAKG,UAAaF,KAAMA,GACxBD,EAAKI,YACHN,GAAG,iBAAkB,WACvBP,EAAMW,MAAMd,gBACVU,GAAG,iBAAkB,SAA4BO,EAAKC,GAExD,IACC5B,SAAS6B,MAAMC,KAAKC,MAAMH,EAAII,MAAMC,cAAcC,SACjD,MAAOb,GACRrB,SAAS6B,MAAM,6CAIlBM,OAAQ,WACP,MAAOxC,OAAMyC,cAAc,SAAWC,IAAK,QAASC,KAAM,OAAQC,KAAM,SAAUC,OAASC,QAAW","file":"app/browser-upload.js","sourcesContent":["'use strict';\n\nvar React = React;\nvar ReactDOM = ReactDOM;\nvar $ = jQuery;\nvar ctx = ctx;\nvar messages = lski.messages;\n\nvar BrowserUpload = React.createClass({\n\tdisplayName: 'BrowserUpload',\n\n\tpropTypes: {\n\t\tuploadFolder: React.PropTypes.string.isRequired,\n\t\tonFileAdded: React.PropTypes.func.isRequired\n\t},\n\tcomponentDidMount: function componentDidMount() {\n\n\t\tvar _this = this;\n\n\t\t// Use jquery on as internally it uses triggerHandler rather than trigger\n\t\t$(this.refs.input).fileupload({ url: ctx.resolveApi('/api/browser/upload') }).on('fileuploadadd', function onFileUploadAdd(e, data) {\n\n\t\t\tvar path = _this.props.uploadFolder;\n\n\t\t\t// If there is not currently a selected folder then stop\n\t\t\tif (!path) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prior to sending the file, we need to add the folder path so it knows where to store it\n\t\t\tdata.formData = { path: path };\n\t\t\tdata.submit();\n\t\t}).on('fileuploaddone', function onFileUploadDone() {\n\t\t\t_this.props.onFileAdded();\n\t\t}).on('fileuploadfail', function onFileUploadFailed(evt, err) {\n\n\t\t\ttry {\n\t\t\t\tmessages.alert(JSON.parse(err.xhr().responseText).message);\n\t\t\t} catch (e) {\n\t\t\t\tmessages.alert('There was an error uploading the file');\n\t\t\t}\n\t\t});\n\t},\n\trender: function render() {\n\t\treturn React.createElement('input', { ref: 'input', type: 'file', name: 'posted', style: { \"display\": 'none' } });\n\t}\n});"],"sourceRoot":"/source/"}