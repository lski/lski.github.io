{"version":3,"sources":["lib/knockout-bindings-ext.js"],"names":["define","ko","bindingHandlers","hidden","update","element","valueAccessor","visible","unwrap","numericValue","init","allBindingsAccessor","val","interceptor","pureComputed","read","write","value","isNaN","parseFloat","numericTextInput","textInput","numeric","addEventListener","evt","keyCode","ctrlKey","shiftKey","preventDefault","stopBinding","controlsDescendantBindings","virtualElements","allowedBindings","autoSubmit","submitTimeout","setTimeout","submit","enterKey","allBindings","viewModel","bindingContext","callback","utils","noop","registerEventHandler","e","argsForHandler","makeArray","arguments","unshift","apply","jumpMenu","option","options","selectedIndex","window","location","hash","assign","blankOption","querySelectorAll","selected","cascadeDisable","valAccessor","disable","elements","Array","prototype","forEach","call","input","disabled","cascadeReadOnly","readonly","toggleClick","pin","position","offset","style","top","left","fadeIn","addClass","toggleClass","arrayLikeObject","result","i","j","length","push","el","rect","getBoundingClientRect","document","body","scrollTop","scrollLeft","ele","className","classList","add","this","hasClass","removeClass","remove","replace","RegExp","split","join","toAdd","contains","test"],"mappings":"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","file":"../../lib/knockout-bindings-ext.js","sourcesContent":["'use strict';\n\ndefine(['knockout'], function (ko) {\n\n\t\"use strict\";\n\n\t/**\r\n  * Simply the reverse of visible (saves calling the binding twice)\r\n  */\n\n\tko.bindingHandlers.hidden = {\n\t\tupdate: function update(element, valueAccessor) {\n\t\t\tko.bindingHandlers.visible.update(element, function () {\n\t\t\t\treturn !ko.unwrap(valueAccessor());\n\t\t\t});\n\t\t}\n\t};\n\n\tko.bindingHandlers.numericValue = {\n\t\tinit: function init(element, valueAccessor, allBindingsAccessor) {\n\t\t\tvar val = valueAccessor();\n\t\t\tvar interceptor = ko.pureComputed({\n\t\t\t\tread: val,\n\t\t\t\twrite: function write(value) {\n\t\t\t\t\tif (!isNaN(value)) {\n\t\t\t\t\t\tval(parseFloat(value));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tko.bindingHandlers.value.init(element, function () {\n\t\t\t\treturn interceptor;\n\t\t\t}, allBindingsAccessor);\n\t\t},\n\t\tupdate: ko.bindingHandlers.value.update\n\t};\n\n\tko.bindingHandlers.numericTextInput = {\n\t\tinit: function init(element, valueAccessor, allBindingsAccessor) {\n\t\t\tvar val = valueAccessor();\n\t\t\tvar interceptor = ko.pureComputed({\n\t\t\t\tread: val,\n\t\t\t\twrite: function write(value) {\n\t\t\t\t\tif (!isNaN(value)) {\n\t\t\t\t\t\tval(parseFloat(value));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tko.bindingHandlers.textInput.init(element, function () {\n\t\t\t\treturn interceptor;\n\t\t\t}, allBindingsAccessor);\n\t\t},\n\t\tupdate: ko.bindingHandlers.textInput.update\n\t};\n\n\tko.bindingHandlers.numeric = {\n\t\tinit: function init(element) {\n\n\t\t\telement.addEventListener('keydown', function (evt) {\n\n\t\t\t\t// Allow: backspace, delete, tab, escape, and enter\n\t\t\t\tif (evt.keyCode == 46 || evt.keyCode == 8 || evt.keyCode == 9 || evt.keyCode == 27 || evt.keyCode == 13 ||\n\t\t\t\t// Allow: Ctrl+A\n\t\t\t\tevt.keyCode == 65 && evt.ctrlKey === true ||\n\t\t\t\t// Allow: . ,\n\t\t\t\tevt.keyCode == 188 || evt.keyCode == 190 || evt.keyCode == 110 ||\n\t\t\t\t// Allow: home, end, left, right\n\t\t\t\tevt.keyCode >= 35 && evt.keyCode <= 39) {\n\t\t\t\t\t// let it happen, don't do anything\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// Ensure that it is a number and stop the keypress\n\t\t\t\t\tif (evt.shiftKey || (evt.keyCode < 48 || evt.keyCode > 57) && (evt.keyCode < 96 || evt.keyCode > 105)) {\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\t};\n\n\t/**\r\n * Prevents all sub bindings from being bound, useful for creating sections to be re-bound via applyBindings\r\n */\n\tko.bindingHandlers.stopBinding = {\n\t\tinit: function init() {\n\t\t\treturn { controlsDescendantBindings: true };\n\t\t}\n\t};\n\tko.virtualElements.allowedBindings.stopBinding = true;\n\n\tko.bindingHandlers.autoSubmit = {\n\t\tupdate: function update(element, valueAccessor) {\n\n\t\t\tvar submitTimeout = ko.unwrap(valueAccessor());\n\n\t\t\tif (submitTimeout) {\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\telement.submit();\n\t\t\t\t}, isNaN(submitTimeout) ? 1 : submitTimeout);\n\t\t\t}\n\t\t}\n\t};\n\n\tko.bindingHandlers.enterKey = {\n\t\tinit: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n\n\t\t\tvar value = valueAccessor(),\n\t\t\t    callback = typeof value !== 'function' ? utils.noop : value;\n\n\t\t\tko.utils.registerEventHandler(element, 'keydown', function (e) {\n\n\t\t\t\tif (e.keyCode == 13) {\n\n\t\t\t\t\t// Take all the event args, and prefix with the viewmodel\n\t\t\t\t\tvar argsForHandler = utils.makeArray(arguments);\n\t\t\t\t\tviewModel = bindingContext['$data'];\n\t\t\t\t\targsForHandler.unshift(viewModel);\n\n\t\t\t\t\tif (callback.apply(viewModel, argsForHandler) !== true) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tko.bindingHandlers.jumpMenu = {\n\t\tinit: function init(element) {\n\n\t\t\telement.addEventListener('change', function () {\n\n\t\t\t\tvar option = element.options[element.selectedIndex];\n\n\t\t\t\tif (option && option.value) {\n\n\t\t\t\t\tif (option.value[0] === '#') {\n\t\t\t\t\t\twindow.location.hash = option.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.location.assign(option.value);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Now reset the value to the empty option (if there is one)\n\t\t\t\t\tvar blankOption = element.querySelectorAll('option[value=\"\"]')[0];\n\t\t\t\t\tif (blankOption) {\n\t\t\t\t\t\tblankOption.selected = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\r\n  * Finds all input types below this and disables them on 'true' and enables them on 'false'\r\n  */\n\tko.bindingHandlers.cascadeDisable = {\n\t\tupdate: function update(element, valAccessor) {\n\n\t\t\tvar disable = ko.unwrap(valAccessor()),\n\t\t\t    elements = element.querySelectorAll('input, select, textarea');\n\n\t\t\tArray.prototype.forEach.call(elements, function (input) {\n\t\t\t\tinput.disabled = disable;\n\t\t\t});\n\t\t}\n\t};\n\n\tko.bindingHandlers.cascadeReadOnly = {\n\t\tupdate: function update(element, valAccessor) {\n\n\t\t\tvar readonly = ko.unwrap(valAccessor()),\n\t\t\t    elements = element.querySelectorAll('input, select, textarea');\n\n\t\t\tArray.prototype.forEach.call(elements, function (input) {\n\t\t\t\tinput.readonly = readonly;\n\t\t\t});\n\t\t}\n\t};\n\n\tko.bindingHandlers.toggleClick = {\n\t\tinit: function init(element, valueAccessor) {\n\t\t\tvar value = valueAccessor();\n\n\t\t\tko.utils.registerEventHandler(element, \"click\", function () {\n\t\t\t\tvalue(!value());\n\t\t\t});\n\t\t}\n\t};\n\n\tko.bindingHandlers.pin = {\n\t\tinit: function init(element, valueAccessor) {\n\n\t\t\tvar position = utils.offset(element),\n\t\t\t    options = valueAccessor();\n\n\t\t\telement.style.position = 'absolute';\n\n\t\t\tif (options.top === true) {\n\t\t\t\telement.style.top = position.top + 'px';\n\t\t\t}\n\n\t\t\tif (options.left === true) {\n\t\t\t\telement.style.left = position.left + 'px';\n\t\t\t}\n\t\t}\n\t};\n\n\tko.bindingHandlers.fadeIn = {\n\t\tinit: function init(element) {\n\n\t\t\tutils.addClass(element, 'fadeIn');\n\t\t},\n\t\tupdate: function update(element, valueAccessor) {\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tutils.toggleClass(element, 'fadeInShow', ko.unwrap(valueAccessor()));\n\t\t\t}, 10);\n\t\t}\n\t};\n\n\tvar utils = {\n\t\tnoop: function noop() {},\n\t\tmakeArray: function makeArray(arrayLikeObject) {\n\n\t\t\tvar result = [];\n\n\t\t\tfor (var i = 0, j = arrayLikeObject.length; i < j; i++) {\n\n\t\t\t\tresult.push(arrayLikeObject[i]);\n\t\t\t};\n\n\t\t\treturn result;\n\t\t},\n\t\toffset: function offset(el) {\n\n\t\t\tvar rect = el.getBoundingClientRect();\n\n\t\t\treturn {\n\t\t\t\ttop: rect.top + document.body.scrollTop,\n\t\t\t\tleft: rect.left + document.body.scrollLeft\n\t\t\t};\n\t\t},\n\t\taddClass: function addClass(ele, className) {\n\n\t\t\tif (ele.classList) {\n\t\t\t\tele.classList.add(className);\n\t\t\t} else if (!this.hasClass(ele, className)) {\n\t\t\t\tele.className += ' ' + className;\n\t\t\t}\n\t\t},\n\t\tremoveClass: function removeClass(ele, className) {\n\n\t\t\tif (ele.classList) {\n\t\t\t\tele.classList.remove(className);\n\t\t\t} else {\n\t\t\t\tele.className = ele.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n\t\t\t}\n\t\t},\n\t\t/**\r\n   * Adds or removes the class depending on whether the add value is true|false, or if not passed then reverses whether it is already added or not\r\n   * @param {Element} ele The element to add/remove class from\r\n   * @param {string} className The class to add/remove\r\n   * @param {add=} add Explicitly state the toggle value (optional)\r\n   */\n\t\ttoggleClass: function toggleClass(ele, className, add) {\n\n\t\t\tvar toAdd = add || this.hasClass(ele, className);\n\n\t\t\tif (toAdd) {\n\t\t\t\tthis.addClass(ele, className);\n\t\t\t} else {\n\t\t\t\tthis.removeClass(ele, className);\n\t\t\t}\n\t\t},\n\t\thasClass: function hasClass(ele, className) {\n\n\t\t\tif (ele.classList) {\n\t\t\t\treturn ele.classList.contains(className);\n\t\t\t} else {\n\t\t\t\treturn new RegExp('(^| )' + className + '( |$)', 'gi').test(ele.className);\n\t\t\t}\n\t\t}\n\t};\n});"]}