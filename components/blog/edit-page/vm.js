"use strict";!function(n){"function"==typeof define&&define.amd&&define(["knockout","knockout-mapping","text!./view.html","app/data-context-blog","lib/auth","lib/url","lib/alerts","lib/knockout-bindings-ext","lib/knockout-bindings-datetime","lib/knockout-bindings-richText"],n)}(function(n,e,t,i,o,l,s){function u(t){var u=this;u.loaded=n.observable(!1),u.model=n.observable(),u.notFound=n.observable(),u.updateRunning=n.observable(!1),u.updateListingRunning=n.observable(!1),o.authenticated()||o.loginRedirect(),i.blogs.getById(t.id).done(function(n){n?u.model(new a(n)):u.notFound(!0),u.loaded(!0)}),u.submit=function(n){u.updateRunning(!0),setTimeout(function(){var n=arguments,t=e.toJS(u.model());i.blogs.update(t).then(function(){l.load(l.resolve("#blog/",t.id)),s.info("Article successfully saved")},function(){console.log("Error occurred",n),s.info("There was an saving the article")}).then(function(){u.updateRunning(!1)})},200)},u.toggleShowInListings=function(){var n=u.model(),e=!n.showInResults();u.updateListingRunning(!0),i.blogs.updateListed(n.id(),e).then(function(){n.showInResults(e),s.success("This is article is now "+(e?"visible":"hidden")+" in listings. You do not need to save the article","Success")},function(n){console.log(n)}).then(function(){u.updateListingRunning(!1)})}}function a(t){e.fromJS(t,{},this),this.cancelLink=t.viewLink,this.newLabel=n.observable(null)}return a.prototype.addLabel=function(){var n=this.newLabel();n&&(this.labels.push({id:null,value:n.toLowerCase()}),this.newLabel(null))},a.prototype.removeLabel=function(n){this.labels.remove(n)},{viewModel:u,template:t}});
//# sourceMappingURL=../../../maps/components/blog/edit-page/vm.js.map
