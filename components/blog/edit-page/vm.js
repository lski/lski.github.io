"use strict";!function(e){"function"==typeof define&&define.amd&&define(["knockout","knockout-mapping","text!./view.html","app/data-context-blog","lib/auth","lib/url","lib/alerts","lib/knockout-bindings-ext","lib/knockout-bindings-datetime","lib/knockout-bindings-richText"],function(n,i,t,o,l,s,u){return e(n,i,t,o,l,s,u)})}(function(e,n,i,t,o,l,s){function u(i){var u=this;u.loaded=e.observable(!1),u.model=e.observable(),u.notFound=e.observable(),u.updateRunning=e.observable(!1),u.updateListingRunning=e.observable(!1),u.fileBrowser=e.observable(!1),o.authenticated()||o.loginRedirect(),t.blogs.getById(i.id).done(function(e){e?u.model(new a(e)):u.notFound(!0),u.loaded(!0)}),u.submit=function(e){u.updateRunning(!0),setTimeout(function(){var e=arguments,i=n.toJS(u.model());t.blogs.update(i).then(function(){l.load(l.resolve("#blog/",i.id)),s.info("Article successfully saved")},function(){console.log("Error occurred",e),s.info("There was an saving the article")}).then(function(){u.updateRunning(!1)})},200)},u.toggleShowInListings=function(){var e=u.model(),n=!e.showInResults();u.updateListingRunning(!0),t.blogs.updateListed(e.id(),n).then(function(){e.showInResults(n),s.success("This is article is now "+(n?"visible":"hidden")+" in listings. You do not need to save the article","Success")},function(e){console.log(e)}).then(function(){u.updateListingRunning(!1)})},u.showFileBrowser=function(){u.fileBrowser(!0)},u.fileBrowserClosed=function(){u.fileBrowser(!1)}}function a(i){n.fromJS(i,{},this),this.cancelLink=i.viewLink,this.newLabel=e.observable(null)}return a.prototype.addLabel=function(){var e=this.newLabel();e&&(this.labels.push({id:null,value:e.toLowerCase()}),this.newLabel(null))},a.prototype.removeLabel=function(e){this.labels.remove(e)},{viewModel:u,template:i}});
//# sourceMappingURL=../../../maps/components/blog/edit-page/vm.js.map
